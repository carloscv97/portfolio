---
import ThemeToggle from './ThemeToggle';
---

<header
  id="header-nav"
  class="sticky h-16 top-0 z-10 dark:bg-dark-blue dark:bg-opacity-80 mx-auto max-w-3xl flex justify-between items-center py-1 px-5 bg-opacity-80 backdrop-blur-lg"
>
  <div
    class="flex flex-1 relative items-center gap-5 opacity-0 -translate-y-5 transition-all"
    id="content-avatar"
  >
    <figure
      class="relative border-white bg-blue-200 dark:bg-gray-800/80 border-[3px] rounded-md dark:border-gray-700 shadow-lg overflow-hidden"
    >
      <img
        src="/avatar.svg"
        alt="avatar"
        class="size-8 relative -bottom-[1px] object-fill"
      />
    </figure>
    <span
      class="font-semibold text-lg whitespace-nowrap text-slate-600 dark:text-slate-300"
    >
      Carlos C<span class="ml-[2px] text-sky-blue">.</span>
    </span>
  </div>
  <ThemeToggle client:only />
</header>

<style>
  /* @keyframes avatar-appear {
    0% {
      opacity: 0;
      transform: translateY(-20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  #content-avatar {
    animation: avatar-appear linear both;
    animation-timeline: scroll();
    animation-range: 0px 300px;
  } */
</style>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function () {
    const avatarElement = document.getElementById('content-avatar');
    const scrollTrigger = 200; // Puedes ajustar esto segÃºn tus necesidades

    window.addEventListener('scroll', function () {
      const scrollY = window.scrollY;

      if (scrollY > scrollTrigger) {
        avatarElement.classList.remove('opacity-0', '-translate-y-5');
        avatarElement.classList.add('opacity-100', 'translate-y-0');
      } else {
        avatarElement.classList.remove('opacity-100', 'translate-y-0');
        avatarElement.classList.add('opacity-0', '-translate-y-5');
      }
    });
  });
</script>
